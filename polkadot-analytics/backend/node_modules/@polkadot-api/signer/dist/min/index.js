"use strict";var p=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var w=(n,t)=>{for(var i in t)p(n,i,{get:t[i],enumerable:!0})},x=(n,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of k(t))!v.call(n,e)&&e!==i&&p(n,e,{get:()=>t[e],enumerable:!(s=h(t,e))||s.enumerable});return n};var f=n=>x(p({},"__esModule",{value:!0}),n);var R={};w(R,{getPolkadotSigner:()=>M});module.exports=f(R);var r=require("@polkadot-api/substrate-bindings"),a=require("@polkadot-api/utils"),P=(0,r.enhanceEncoder)(r.u8.enc,n=>+!!n.signed<<7|n.version),b={Ed25519:0,Sr25519:1,Ecdsa:2};function M(n,t,i){return{publicKey:n,sign:async(e,u,A,C,U=r.Blake2256)=>{let d;try{let o=r.metadata.dec(A);if(o.metadata.tag!=="v15")throw null;d=o.metadata.value}catch{throw new Error("Unsupported metadata version")}let{version:S}=d.extrinsic,c=[],l=[];d.extrinsic.signedExtensions.map(({identifier:o})=>{let m=u[o];if(!m)throw new Error(`Missing ${o} signed extension`);c.push(m.value),l.push(m.additionalSigned)});let g=(0,a.mergeUint8)(e,...c,...l),E=await i(g.length>256?U(g):g),y=(0,a.mergeUint8)(P({signed:!0,version:S}),new Uint8Array([0,...n]),new Uint8Array([b[t],...E]),...c,e);return(0,a.mergeUint8)(r.compact.enc(y.length),y)}}}
//# sourceMappingURL=index.js.map